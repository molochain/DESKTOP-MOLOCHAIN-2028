Last failed login: Mon Dec  8 16:59:50 +03 2025 from 210.186.152.130 on ssh:notty
There was 1 failed login attempt since the last successful login.
Last login: Mon Dec  8 16:59:37 2025 from 91.93.232.51

This server is powered by Plesk.

Run the 'plesk login' command and log in by browsing either of the links received in the output.
Use the 'plesk' command to manage the server. Run 'plesk help' for more info.

[root@zen-agnesi ~]# /opt/plesk/php/8.4/bin/php artisan tinker --execute="print_r(Schema::getColumnListing('pages'));"
Could not open input file: artisan
[root@zen-agnesi ~]# cd /var/www/vhosts/molochain.com/cms.molochain.com && /opt/plesk/php/8.4/bin/php artisan tinker --execute="print_r(Schema::getColumnListing('pages'));"
Array
(
    [0] => id
    [1] => title
    [2] => slug
    [3] => status
    [4] => template
    [5] => content
    [6] => meta
    [7] => created_at
    [8] => updated_at
    [9] => deleted_at
)
[root@zen-agnesi cms.molochain.com]# cat > app/Http/Controllers/Api/PageController.php << 'EOF'
<?php

namespace App\Http\Controllers\Api;

use App\Http\Controllers\Controller;
use App\Models\Page;
use Illuminate\Http\JsonResponse;
use Illuminate\Http\Request;

class PageController extends Controller
{
    public function index(): JsonResponse
    {
        $pages = Page::select('id', 'title', 'slug', 'status', 'template', 'updated_at')
            ->orderBy('title')
            ->get();
        
        return response()->json($pages);
    }

    public function showBySlug(string $slug): JsonResponse
    {
        $page = Page::query()
            ->where('slug', $slug)
            ->where('status', 'published')
            ->first();

        if (!$page) {
            return response()->json(['message' => 'Page not found'], 404);
        }

        return response()->json($page);
    }

    public function store(Request $request): JsonResponse
    {
        $validated = $request->validate([
            'title' => 'required|string|max:255',
            'slug' => 'required|string|max:255|unique:pages',
            'content' => 'nullable|string',
            'status' => 'in:draft,published',
            'template' => 'nullable|string',
            'meta' => 'nullable|array',
        ]);
        $page = Page::create($validated);
EOF }   return response()->json(['message' => 'Page deleted successfully']);